services:
    next-mokuro-bookshelf:
        volumes:
            - ./:/app/
        build:
            context: ./
            dockerfile: ./Dockerfile
        container_name: next-mokuro-bookshelf
        ports:
            - "3000:3000"
        env_file:
            - ./.env
        environment:
            - NODE_ENV=production
            - PORT=3000
        labels:
            - "traefik.enable=true"
            - "traefik.http.routers.next-mokuro-bookshelf.entrypoints=web, websecure"
            - "traefik.http.routers.next-mokuro-bookshelf.rule=Host(`${MY_HOST}`)" 
            - "traefik.http.routers.next-mokuro-bookshelf.tls.certresolver=myresolver"
            - "traefik.http.routers.next-mokuro-bookshelf.tls.domains[0].main=${MY_HOST}"
            - "traefik.http.services.next-mokuro-bookshelf.loadbalancer.server.port=3000"